plugins {
    id "java"
    id "org.jetbrains.kotlin.jvm" version "${kotlinVersion}"
}

group "fr.mrsquaare"
version "${kotlinVersion}"

configurations {
    shadow
}

repositories {
    mavenCentral()
    mavenLocal()
    maven {
        name = "Spigot"
        url = "https://hub.spigotmc.org/nexus/content/repositories/snapshots/"
    }
}

dependencies {
    shadow group: "org.jetbrains.kotlin", name: "kotlin-stdlib", version: "${kotlinVersion}"
    compileOnly group: "org.spigotmc", name: "spigot-api", version: "${spigotVersion}"
}

processResources {
    filesMatching("plugin.yml") {
        expand("pluginVersion": "${pluginVersion}", "apiVersion": "${apiVersion}")
    }
}

jar {
    from {
        configurations.shadow.collect { it.isDirectory() ? it : zipTree(it) }
    }
}
